{"remainingRequest":"/Users/guorun/Desktop/testVercel/vue3.0/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/guorun/Desktop/testVercel/vue3.0/src/components/ValidateInput.vue?vue&type=template&id=c2a57358&ts=true","dependencies":[{"path":"/Users/guorun/Desktop/testVercel/vue3.0/src/components/ValidateInput.vue","mtime":1733291579643},{"path":"/Users/guorun/Desktop/testVercel/vue3.0/node_modules/cache-loader/dist/cjs.js","mtime":1733292094796},{"path":"/Users/guorun/Desktop/testVercel/vue3.0/node_modules/ts-loader/index.js","mtime":1733292094861},{"path":"/Users/guorun/Desktop/testVercel/vue3.0/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1733292095261},{"path":"/Users/guorun/Desktop/testVercel/vue3.0/node_modules/cache-loader/dist/cjs.js","mtime":1733292094796},{"path":"/Users/guorun/Desktop/testVercel/vue3.0/node_modules/vue-loader-v16/dist/index.js","mtime":1733292095261}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgICA8ZGl2IGNsYXNzPSJtYi0zIj4KICAgICAgICA8bGFiZWwgY2xhc3M9ImZvcm0tbGFiZWwiPnt7IGxhYmVsfX08L2xhYmVsPgogICAgICAgICAgICA8aW5wdXQKICAgICAgICAgICAgdi1pZj0idGFnPT09J2lucHV0JyIKICAgICAgICAgICAgdi1iaW5kPSIkYXR0cnMiCiAgICAgICAgICAgIGNsYXNzPSJmb3JtLWNvbnRyb2wiCiAgICAgICAgICAgIDpjbGFzcz0ieyAnaXMtaW52YWxpZCc6aW5wdXRSZWYuZXJyb3IgfSIgOnZhbHVlPSJpbnB1dFJlZi52YWwiCiAgICAgICAgICAgIEBpbnB1dD0idXBkYXRlVmFsdWUiCiAgICAgICAgICAgIEBibHVyPSJ2YWxpZGF0ZUlucHV0Ij4KICAgICAgICAgICAgPHRleHRhcmVhCiAgICAgICAgICAgIHYtZWxzZQogICAgICAgICAgICB2LWJpbmQ9IiRhdHRycyIKICAgICAgICAgICAgY2xhc3M9ImZvcm0tY29udHJvbCIKICAgICAgICAgICAgOmNsYXNzPSJ7ICdpcy1pbnZhbGlkJzppbnB1dFJlZi5lcnJvciB9IiA6dmFsdWU9ImlucHV0UmVmLnZhbCIKICAgICAgICAgICAgQGlucHV0PSJ1cGRhdGVWYWx1ZSIKICAgICAgICAgICAgQGJsdXI9InZhbGlkYXRlSW5wdXQiPjwvdGV4dGFyZWE+CiAgICAgICAgICAgIDxzcGFuIHYtaWY9ImlucHV0UmVmLmVycm9yIiBjbGFzcz0iaW52YWxpZC1mZWVkYmFjayI+e3sgaW5wdXRSZWYubWVzc2FnZSB9fTwvc3Bhbj4KICAgIDwvZGl2Pgo="},{"version":3,"sources":["/Users/guorun/Desktop/testVercel/vue3.0/src/components/ValidateInput.vue"],"names":[],"mappings":";IACI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACb,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACvC,CAAC,CAAC,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7D,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACrB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACR,CAAC,CAAC,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7D,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAChC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzF,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/Users/guorun/Desktop/testVercel/vue3.0/src/components/ValidateInput.vue","sourceRoot":"","sourcesContent":["<template>\n    <div class=\"mb-3\">\n        <label class=\"form-label\">{{ label}}</label>\n            <input\n            v-if=\"tag==='input'\"\n            v-bind=\"$attrs\"\n            class=\"form-control\"\n            :class=\"{ 'is-invalid':inputRef.error }\" :value=\"inputRef.val\"\n            @input=\"updateValue\"\n            @blur=\"validateInput\">\n            <textarea\n            v-else\n            v-bind=\"$attrs\"\n            class=\"form-control\"\n            :class=\"{ 'is-invalid':inputRef.error }\" :value=\"inputRef.val\"\n            @input=\"updateValue\"\n            @blur=\"validateInput\"></textarea>\n            <span v-if=\"inputRef.error\" class=\"invalid-feedback\">{{ inputRef.message }}</span>\n    </div>\n</template>\n\n<script lang=\"ts\">\nconst emailPattern = /\\w[-\\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\\.)+[A-Za-z]{2,14}/\ninterface RuleProp{\n    type: 'required' | 'email' | 'password',// 可扩展...\n    message:string\n}\nexport type RulesProp =RuleProp[]\nexport type TagType = 'input' | 'textarea'\n\nimport { defineComponent, PropType, reactive ,onMounted} from 'vue'\nimport { emitter } from './ValidateFrom.vue'\nexport default defineComponent({\n    inheritAttrs:false, \n    name:'ValidateInput',\n    props:{\n        rules:{ //写法1\n            type:Array as PropType< RulesProp>\n        },\n        // rules:Array as PropType< RuleProps> //写法2\n        label:{\n            type:String ,\n            default:''\n        },\n        modelValue:{\n            type:String,\n            default:''\n        },\n        tag:{\n            type:String as PropType<TagType>,\n            default:'input'\n        }\n    },\n    setup(props,context){\n        console.log(context.attrs);\n        \n    const  updateValue=(e:KeyboardEvent)=>{\n        const targeValue=(e.target as HTMLInputElement).value\n        inputRef.val=targeValue\n        context.emit('update:modelValue',targeValue)\n    }\n    const inputRef=reactive({\n        val:props.modelValue || '',\n        error:false,\n        message:''\n    })\n    const validateInput=()=>{\n        if(props.rules){\n            const allPassed=props.rules.every( rule =>{\n                let passed=true\n                inputRef.message=rule.message\n                switch (rule.type) {\n                    case 'required':\n                        passed=(inputRef.val.trim()!=='')\n                        break;\n                    case 'email':\n                        passed=emailPattern.test(inputRef.val)\n                        break;\n                    case 'password':\n                        passed=inputRef.val.length===0\n                        break;    \n                    default:\n                        break;\n                }\n                return passed\n            })\n            inputRef.error=!allPassed\n            return allPassed\n        }\n        return true\n    }\n    onMounted(()=>{\n        emitter.emit('form-item-created' ,validateInput)\n    })\n    return {\n        inputRef,\n        validateInput,\n        updateValue\n    }\n    }\n});\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>\n"]}]}