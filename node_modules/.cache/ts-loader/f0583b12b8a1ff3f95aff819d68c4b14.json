{"remainingRequest":"/Users/guorun/Desktop/testVercel/vue3.0/node_modules/ts-loader/index.js??ref--14-1!/Users/guorun/Desktop/testVercel/vue3.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/guorun/Desktop/testVercel/vue3.0/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/guorun/Desktop/testVercel/vue3.0/src/components/ValidateInput.vue?vue&type=script&lang=ts","dependencies":[{"path":"/Users/guorun/Desktop/testVercel/vue3.0/src/components/ValidateInput.vue","mtime":1733291579643},{"path":"/Users/guorun/Desktop/testVercel/vue3.0/node_modules/cache-loader/dist/cjs.js","mtime":1733292094796},{"path":"/Users/guorun/Desktop/testVercel/vue3.0/node_modules/ts-loader/index.js","mtime":1733292094861},{"path":"/Users/guorun/Desktop/testVercel/vue3.0/node_modules/cache-loader/dist/cjs.js","mtime":1733292094796},{"path":"/Users/guorun/Desktop/testVercel/vue3.0/node_modules/vue-loader-v16/dist/index.js","mtime":1733292095261}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIGVtYWlsUGF0dGVybiA9IC9cd1stXHcuK10qQChbQS1aYS16MC05XVstQS1aYS16MC05XStcLikrW0EtWmEtel17MiwxNH0vOwppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIHJlYWN0aXZlLCBvbk1vdW50ZWQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyBlbWl0dGVyIH0gZnJvbSAnLi9WYWxpZGF0ZUZyb20udnVlJzsKZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHsKICAgIGluaGVyaXRBdHRyczogZmFsc2UsCiAgICBuYW1lOiAnVmFsaWRhdGVJbnB1dCcsCiAgICBwcm9wczogewogICAgICAgIHJ1bGVzOiB7CiAgICAgICAgICAgIHR5cGU6IEFycmF5CiAgICAgICAgfSwKICAgICAgICAvLyBydWxlczpBcnJheSBhcyBQcm9wVHlwZTwgUnVsZVByb3BzPiAvL+WGmeazlTIKICAgICAgICBsYWJlbDogewogICAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgICAgIGRlZmF1bHQ6ICcnCiAgICAgICAgfSwKICAgICAgICBtb2RlbFZhbHVlOiB7CiAgICAgICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICAgICAgZGVmYXVsdDogJycKICAgICAgICB9LAogICAgICAgIHRhZzogewogICAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgICAgIGRlZmF1bHQ6ICdpbnB1dCcKICAgICAgICB9CiAgICB9LAogICAgc2V0dXA6IGZ1bmN0aW9uIChwcm9wcywgY29udGV4dCkgewogICAgICAgIGNvbnNvbGUubG9nKGNvbnRleHQuYXR0cnMpOwogICAgICAgIHZhciB1cGRhdGVWYWx1ZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciB0YXJnZVZhbHVlID0gZS50YXJnZXQudmFsdWU7CiAgICAgICAgICAgIGlucHV0UmVmLnZhbCA9IHRhcmdlVmFsdWU7CiAgICAgICAgICAgIGNvbnRleHQuZW1pdCgndXBkYXRlOm1vZGVsVmFsdWUnLCB0YXJnZVZhbHVlKTsKICAgICAgICB9OwogICAgICAgIHZhciBpbnB1dFJlZiA9IHJlYWN0aXZlKHsKICAgICAgICAgICAgdmFsOiBwcm9wcy5tb2RlbFZhbHVlIHx8ICcnLAogICAgICAgICAgICBlcnJvcjogZmFsc2UsCiAgICAgICAgICAgIG1lc3NhZ2U6ICcnCiAgICAgICAgfSk7CiAgICAgICAgdmFyIHZhbGlkYXRlSW5wdXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChwcm9wcy5ydWxlcykgewogICAgICAgICAgICAgICAgdmFyIGFsbFBhc3NlZCA9IHByb3BzLnJ1bGVzLmV2ZXJ5KGZ1bmN0aW9uIChydWxlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBhc3NlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgaW5wdXRSZWYubWVzc2FnZSA9IHJ1bGUubWVzc2FnZTsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJ1bGUudHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyZXF1aXJlZCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzZWQgPSAoaW5wdXRSZWYudmFsLnRyaW0oKSAhPT0gJycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VtYWlsJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3NlZCA9IGVtYWlsUGF0dGVybi50ZXN0KGlucHV0UmVmLnZhbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncGFzc3dvcmQnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc2VkID0gaW5wdXRSZWYudmFsLmxlbmd0aCA9PT0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXNzZWQ7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlucHV0UmVmLmVycm9yID0gIWFsbFBhc3NlZDsKICAgICAgICAgICAgICAgIHJldHVybiBhbGxQYXNzZWQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfTsKICAgICAgICBvbk1vdW50ZWQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBlbWl0dGVyLmVtaXQoJ2Zvcm0taXRlbS1jcmVhdGVkJywgdmFsaWRhdGVJbnB1dCk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaW5wdXRSZWY6IGlucHV0UmVmLAogICAgICAgICAgICB2YWxpZGF0ZUlucHV0OiB2YWxpZGF0ZUlucHV0LAogICAgICAgICAgICB1cGRhdGVWYWx1ZTogdXBkYXRlVmFsdWUKICAgICAgICB9OwogICAgfQp9KTsK"},{"version":3,"file":"/Users/guorun/Desktop/testVercel/vue3.0/src/components/ValidateInput.vue.ts","sourceRoot":"","sources":["/Users/guorun/Desktop/testVercel/vue3.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/guorun/Desktop/testVercel/vue3.0/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/guorun/Desktop/testVercel/vue3.0/src/components/ValidateInput.vue?vue&type=script&lang=ts"],"names":[],"mappings":"AACA,IAAM,YAAY,GAAG,wDAAwD,CAAA;AAQ7E,OAAO,EAAE,eAAe,EAAY,QAAQ,EAAE,SAAS,EAAC,MAAM,KAAK,CAAA;AACnE,OAAO,EAAE,OAAO,EAAE,MAAM,oBAAoB,CAAA;AAC5C,eAAe,eAAe,CAAC;IAC3B,YAAY,EAAC,KAAK;IAClB,IAAI,EAAC,eAAe;IACpB,KAAK,EAAC;QACF,KAAK,EAAC;YACF,IAAI,EAAC,KAA6B;SACrC;QACD,4CAA4C;QAC5C,KAAK,EAAC;YACF,IAAI,EAAC,MAAM;YACX,OAAO,EAAC,EAAE;SACb;QACD,UAAU,EAAC;YACP,IAAI,EAAC,MAAM;YACX,OAAO,EAAC,EAAE;SACb;QACD,GAAG,EAAC;YACA,IAAI,EAAC,MAA2B;YAChC,OAAO,EAAC,OAAO;SAClB;KACJ;IACD,KAAK,EAAL,UAAM,KAAK,EAAC,OAAO;QACf,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAE/B,IAAO,WAAW,GAAC,UAAC,CAAe;YAC/B,IAAM,UAAU,GAAE,CAAC,CAAC,MAA2B,CAAC,KAAK,CAAA;YACrD,QAAQ,CAAC,GAAG,GAAC,UAAU,CAAA;YACvB,OAAO,CAAC,IAAI,CAAC,mBAAmB,EAAC,UAAU,CAAC,CAAA;QAChD,CAAC,CAAA;QACD,IAAM,QAAQ,GAAC,QAAQ,CAAC;YACpB,GAAG,EAAC,KAAK,CAAC,UAAU,IAAI,EAAE;YAC1B,KAAK,EAAC,KAAK;YACX,OAAO,EAAC,EAAE;SACb,CAAC,CAAA;QACF,IAAM,aAAa,GAAC;YAChB,IAAG,KAAK,CAAC,KAAK,EAAC;gBACX,IAAM,SAAS,GAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAE,UAAA,IAAI;oBACnC,IAAI,MAAM,GAAC,IAAI,CAAA;oBACf,QAAQ,CAAC,OAAO,GAAC,IAAI,CAAC,OAAO,CAAA;oBAC7B,QAAQ,IAAI,CAAC,IAAI,EAAE;wBACf,KAAK,UAAU;4BACX,MAAM,GAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,EAAE,KAAG,EAAE,CAAC,CAAA;4BACjC,MAAM;wBACV,KAAK,OAAO;4BACR,MAAM,GAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAA;4BACtC,MAAM;wBACV,KAAK,UAAU;4BACX,MAAM,GAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,KAAG,CAAC,CAAA;4BAC9B,MAAM;wBACV;4BACI,MAAM;qBACb;oBACD,OAAO,MAAM,CAAA;gBACjB,CAAC,CAAC,CAAA;gBACF,QAAQ,CAAC,KAAK,GAAC,CAAC,SAAS,CAAA;gBACzB,OAAO,SAAS,CAAA;aACnB;YACD,OAAO,IAAI,CAAA;QACf,CAAC,CAAA;QACD,SAAS,CAAC;YACN,OAAO,CAAC,IAAI,CAAC,mBAAmB,EAAE,aAAa,CAAC,CAAA;QACpD,CAAC,CAAC,CAAA;QACF,OAAO;YACH,QAAQ,UAAA;YACR,aAAa,eAAA;YACb,WAAW,aAAA;SACd,CAAA;IACD,CAAC;CACJ,CAAC,CAAC","sourcesContent":["\nconst emailPattern = /\\w[-\\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\\.)+[A-Za-z]{2,14}/\ninterface RuleProp{\n    type: 'required' | 'email' | 'password',// 可扩展...\n    message:string\n}\nexport type RulesProp =RuleProp[]\nexport type TagType = 'input' | 'textarea'\n\nimport { defineComponent, PropType, reactive ,onMounted} from 'vue'\nimport { emitter } from './ValidateFrom.vue'\nexport default defineComponent({\n    inheritAttrs:false, \n    name:'ValidateInput',\n    props:{\n        rules:{ //写法1\n            type:Array as PropType< RulesProp>\n        },\n        // rules:Array as PropType< RuleProps> //写法2\n        label:{\n            type:String ,\n            default:''\n        },\n        modelValue:{\n            type:String,\n            default:''\n        },\n        tag:{\n            type:String as PropType<TagType>,\n            default:'input'\n        }\n    },\n    setup(props,context){\n        console.log(context.attrs);\n        \n    const  updateValue=(e:KeyboardEvent)=>{\n        const targeValue=(e.target as HTMLInputElement).value\n        inputRef.val=targeValue\n        context.emit('update:modelValue',targeValue)\n    }\n    const inputRef=reactive({\n        val:props.modelValue || '',\n        error:false,\n        message:''\n    })\n    const validateInput=()=>{\n        if(props.rules){\n            const allPassed=props.rules.every( rule =>{\n                let passed=true\n                inputRef.message=rule.message\n                switch (rule.type) {\n                    case 'required':\n                        passed=(inputRef.val.trim()!=='')\n                        break;\n                    case 'email':\n                        passed=emailPattern.test(inputRef.val)\n                        break;\n                    case 'password':\n                        passed=inputRef.val.length===0\n                        break;    \n                    default:\n                        break;\n                }\n                return passed\n            })\n            inputRef.error=!allPassed\n            return allPassed\n        }\n        return true\n    }\n    onMounted(()=>{\n        emitter.emit('form-item-created' ,validateInput)\n    })\n    return {\n        inputRef,\n        validateInput,\n        updateValue\n    }\n    }\n});\n"]}]}